<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.net.*?>
<?import javafx.collections.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.*?>
<?import org.comdnmr.fit.gui.*?>
<?import org.controlsfx.control.*?>
<?import org.nmrfx.chart.XYChartPane?>



<?language python?>

<BorderPane fx:id="mainBox"  styleClass="mainFxmlClass" xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.comdnmr.fit.gui.PyController">
    <fx:script source="actions.py"/>
    <top>
        <HBox>
            <children>
                <MenuBar>
                    <Menu text="File">
                        <items>
                            <MenuItem text="Load Project File..." onAction="#loadParameterFile" fx:id="loadMenuItem"/>
                            <MenuItem text="Input Project Parameters..." onAction="#inputParameters" fx:id="inputMenuItem"/>
                            <MenuItem text="Connect to NMRFx Server..." onAction="#startServer" fx:id = "serverMenuItem"/>
                            <MenuItem text="Load Secondary Structure..." onAction="#loadSecondaryStructure" fx:id="loadSSMenuItem"/>
                            <Menu text="Save">
                                <items>
                                    <MenuItem text="Save Analysis..." onAction="#saveParameters" fx:id="savePars"/>
                                    <MenuItem text="Save Bar Chart..." onAction="#saveBarChart" fx:id="saveBarChartButton"/>
                                    <MenuItem text="Save XY Chart..." onAction="#saveXYChart" fx:id="saveXYChartButton"/>                       
                                </items>
                            </Menu>
                            <Menu text="Export XY Chart">
                                <items>
                                    <MenuItem text="Save Grace File..." onAction="#saveGraceFile" fx:id="saveGraceButton"/>
                                    <MenuItem text="Save Python File..." onAction="#savePythonFile" fx:id="savePythonButton"/>
                                    <MenuItem text="Save R File..." onAction="#saveRFile" fx:id="saveRButton"/>                            
                                </items>
                            </Menu>
                            <Menu text="Export Bar Chart">
                                <items>
                                    <MenuItem text="Save Python File..." onAction="#saveBarToPythonFile"/>
                                    <MenuItem text="Save R File..." onAction="#saveBarToRFile"/>                            
                                </items>
                            </Menu>
                            
                            <MenuItem text="Print XY Chart..." onAction="#printXYChart"/>                       
                            <MenuItem text="Export SVG XY Chart..." onAction="#exportSVGAction"/>                       
                            <MenuItem text="Export SVG Bar Chart..." onAction="#exportBarPlotSVGAction"/>                       
                            <MenuItem text="Load Sample Data..." onAction="#loadSimData"/>
                            <MenuItem text="Preferences..." onAction="#showPreferences"/>
                            <MenuItem text="Show Console" onAction="#showConsole"/>
                            <MenuItem text="Exit" onAction="#exitProgram"/>

                        </items>
                    </Menu>
                    <Menu text="Chart">
                        <items>
                            <MenuItem text="New Chart" onAction="#addChart" fx:id="addChart"/>
                            <MenuItem text="Remove Active Chart" onAction="#removeChart" fx:id="removeChart"/>
                            <MenuItem text="Clear Active Chart" onAction="#clearChart" fx:id="clearChart"/>
                            <Menu text="Add Data" fx:id="axisMenu"/>
                        </items>
                    </Menu>
                    <Menu text="Fitting">
                        <items>
                            <MenuItem text="Fit All" onAction="#fitResidues" fx:id="FitResidues"/>
                            <MenuItem text="Fit Selected" onAction="#fitGroupResidues" fx:id="FitGroupResidues"/>
                            <MenuItem  text="Halt" onAction="#haltFit" fx:id="haltProcessButton" />
                            <MenuItem text="Monte Carlo Plot" onAction="#showMCplot" fx:id="MCPlot"/>
                        </items>
                    </Menu>
                </MenuBar>
            </children>
        </HBox>
    </top>

    <center>
        <SplitPane orientation="vertical" fx:id="splitPane">
            <items>
                <SplitPane orientation="horizontal" prefHeight="550">
                    <items>
                        <XYPlotDataPane fx:id="chartPane" HBox.hgrow="ALWAYS" />
                        <VBox HBox.hgrow="ALWAYS"  VBox.vgrow="ALWAYS" >
                            <TabPane fx:id="parTabPane"  VBox.vgrow="ALWAYS" >
                                <Tab text="Parameters" closable="false" > 
                                    <BorderPane HBox.hgrow="ALWAYS">
                                        <top>
                                            <VBox>
                                                <HBox>
                                                    <children>
                                                        <ChoiceBox fx:id="equationChoice">

                                                        </ChoiceBox>
                                                        <Button text="Set" onAction="#setBestEquation" />
                                                    </children>
                                                </HBox> 
                                                <HBox>
                                                    <children>
                                                        <Label text="AIC: " fx:id="aicLabel1"/>
                                                        <Label text="" fx:id="aicLabel"/>
                                                        <Label text="  RMS: " fx:id="rmsLabel1"/>
                                                        <Label text="" fx:id="rmsLabel"/>
                                                        <Label text="  rChiSq: " fx:id="rChiSqLabel1"/>
                                                        <Label text="" fx:id="rChiSqLabel"/>
                                                    </children>
                                                </HBox> 
                                            </VBox>
                                        </top>
                                           
                                        <center>
                                            <TableView fx:id="parameterTable" prefHeight="200" VBox.vgrow="ALWAYS"  >
                                            </TableView>
                                        </center>
                                    </BorderPane>
                                </Tab>
                                <Tab text="Data" closable="false" > 
                                    <BorderPane fx:id="dataPane">
                                        <top>
                                            <Button text="show NMRFx peak" onAction="#nmrFxMessage" fx:id="nmrFxPeakButton" />
                                        </top>
                                        <center>
                                            <TableView fx:id="resInfoTable" prefHeight="200" VBox.vgrow="ALWAYS"  >
                                            </TableView>
                                        </center>
                                    </BorderPane>
                                </Tab>
                                <Tab text="Simulate" closable="false" > 
                                    <BorderPane fx:id="simPane" HBox.hgrow="ALWAYS">
                                        <padding>
                                            <Insets top="5" right="5" left="5" bottom="5"/>                 
                                        </padding>
                                        <top>
                                            <HBox>
                                                <children>
                                                    <ChoiceBox fx:id="simChoice">
                                                    </ChoiceBox>
                                                    <Button text="Display" onAction="#displayEquation" fx:id="DisplayEquation"/>
                                                    <Button text="Gen" onAction="#showSimData" fx:id="Gen"/>
                                                    <Button text="Guess" onAction="#guesses" fx:id="Guesses"/>
                                                    <Button text="Fit" onAction="#fitEquation" fx:id="FitEquation"/>
                                                </children>
                                            </HBox>
                                        </top>
                                    </BorderPane>
                                </Tab>
                                <Tab text="Fitter" closable="false" > 
                                    <VBox HBox.hgrow="ALWAYS">
                                        <children>
                                            <HBox>
                                                <children>
                                                </children>
                                            </HBox> 
                                            <HBox>
                                                <children>
                                                    <CheckBox text="Absolute Value Mode  " fx:id="absValueModeCheckBox"/>
                                                    <CheckBox text="Non-Parametric Fit" fx:id="nonParBootStrapCheckBox"/>
                                                </children>
                                            </HBox>
                                            <HBox>
                                                <children>
                                                    <CheckBox text="Calculate Errors          " fx:id="calcErrorsCheckBox"/>
                                                    <CheckBox text="Slider Guess" fx:id="sliderGuessCheckBox"/>
                                                </children>
                                            </HBox> 
                                        </children>

                                    </VBox>
                                </Tab>
                                <Tab text="Chart Bounds" closable="false" > 
                                    <VBox HBox.hgrow="ALWAYS">
                                        <children>
                                            <HBox>
                                                <children>
                                                </children>
                                            </HBox> 
                                            <HBox>
                                                <children>
                                                    <Label text="X LB  " fx:id="xLowerBoundLabel"/>
                                                    <TextField fx:id="xLowerBoundTextField" prefWidth="100"/>
                                                    <Label text="  X UB  " fx:id="xUpperBoundLabel"/>
                                                    <TextField fx:id="xUpperBoundTextField" prefWidth="100"/>
                                                    <Label text="  X tick interval  " fx:id="xTickLabel"/>
                                                    <TextField fx:id="xTickTextField" prefWidth="100"/>
                                                </children>
                                            </HBox>
                                            <HBox>
                                                <children>
                                                    <Label text="Y LB  " fx:id="yLowerBoundLabel"/>
                                                    <TextField fx:id="yLowerBoundTextField" prefWidth="100"/>
                                                    <Label text="  Y UB  " fx:id="yUpperBoundLabel"/>
                                                    <TextField fx:id="yUpperBoundTextField" prefWidth="100"/>
                                                    <Label text="  Y tick interval  " fx:id="yTickLabel"/>
                                                    <TextField fx:id="yTickTextField" prefWidth="100"/>
                                                </children>
                                            </HBox>
                                            <Button text="Set Bounds" onAction="#setBounds" fx:id="setBoundsButton"/>
                                            <Button text="Autoscale Bounds" onAction="#autoscaleBounds" fx:id="autoscaleBoundsButton"/>
                                        </children>

                                    </VBox>
                                </Tab>
                            </TabPane>
                        </VBox>
                    </items>
                </SplitPane>
                <Pane fx:id="chartBox" VBox.vgrow="ALWAYS">
                </Pane>

            </items>
        </SplitPane>

    </center>
    <right>
    </right>
    <left>
    </left>
    <bottom>
        <HBox>
            <children>
                <ToolBar fx:id="navigatorToolBar" orientation="HORIZONTAL" BorderPane.alignment="CENTER"/>
                <StatusBar fx:id="statusBar" HBox.hgrow="ALWAYS"/>
            </children>
        </HBox>
    </bottom>



</BorderPane>
